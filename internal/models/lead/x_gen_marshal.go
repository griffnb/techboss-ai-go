// Code generated by core_generate; DO NOT EDIT.

package lead

import (
	"database/sql/driver"
	"encoding/json"

	"github.com/CrowdShield/go-core/lib/model"
	"github.com/CrowdShield/go-core/lib/model/fields"
	aws_types "github.com/aws/aws-sdk-go-v2/service/dynamodb/types"
	"github.com/pkg/errors"
)

// UnmarshalJSON interface
func (this *Lead) UnmarshalJSON(data []byte) error {
	this.InitializeWithChangeLogs(&model.InitializeOptions{
		Table:       TABLE,
		Model:       MODEL,
		ChangeLogs:  CHANGE_LOGS,
		Package:     PACKAGE,
		IsVersioned: IS_VERSIONED,
	})
	err := fields.InitializeFields(this)
	if err != nil {
		return err
	}

	return this.BaseModel.UnmarshalJSON(data)
}

// UnmarshalDynamoDBAttributeValue interface
func (this *Lead) UnmarshalDynamoDBAttributeValue(av aws_types.AttributeValue) error {
	this.InitializeWithChangeLogs(&model.InitializeOptions{
		Table:       TABLE,
		Model:       MODEL,
		ChangeLogs:  CHANGE_LOGS,
		Package:     PACKAGE,
		IsVersioned: IS_VERSIONED,
	})
	err := fields.InitializeFields(this)
	if err != nil {
		return err
	}

	return this.BaseModel.UnmarshalDynamoDBAttributeValue(av)
}

func (r *Lead) Scan(src any) error {
	switch v := src.(type) {
	case nil:
		*r = Lead{}
		return nil
	case []byte:
		return errors.WithStack(json.Unmarshal(v, r))
	case string:
		return errors.WithStack(json.Unmarshal([]byte(v), r))
	default:
		return errors.Errorf("Lead.Scan: unsupported type %T", src)
	}
}

func (r *Lead) Value() (driver.Value, error) {
	b, err := json.Marshal(r)
	if err != nil {
		return nil, errors.WithStack(err)
	}
	return string(b), nil // or b
}
